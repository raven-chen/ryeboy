<h1>最新打卡</h1>

<%= form_tag(exercises_path, :method => :get, :class => "form-inline", :role => "form") do %>
  <div class="searchfield-above-table">
    <%= select_tag :user_id, options_from_collection_for_select(User.all, "id", "name", @user_id), :prompt => "昵称", :class => "js-select2 normal-width-select2" %>
    <%= select_tag :task_id, options_from_collection_for_select(Task.all, "id", "name", @task_id), :prompt => "功课", :class => "js-select2 normal-width-select2" %>
    <%= text_field_tag :date, @date, :class => "js-date-field", :placeholder => "日期" %>
    <%= submit_tag "搜索", :class => "btn btn-default" %>
  </div>
<% end -%>

<div>
  <% if @exercises.present? -%>
  <ul id="exercise-list">
    <% @exercises.each do |exercise| %>
      <li class="exercise-container">
        <ol class="title">
          <li class="name"><%= exercise.task.name %></li>
          <li><%= exercise.user.name %></li>
          <li><%= exercise.date.strftime(t("date.formats.default")) %></li>
          <li><%= link_to t("helpers.comment"), new_comment_path(:exercise_id => exercise.id) %></li>
        </ol>
        <div class="clearfix"></div>

        <div class="content">
          <%= exercise.content %>
        </div>

        <%= render :partial => "comments", :locals => {:exercise => exercise} if exercise.comments.present? %>
      </li>
    <% end -%>
  </ul>
  <% else -%>
    <%= t("helpers.no_results") %>
  <% end -%>
</div>
